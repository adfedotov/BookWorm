{% extends 'layout.html' %}

{% block content %}
<!-- Need error handling -->
<div class="fluid-container note-create">
  <div class="book-display">
    <img src="{{ book_info['cover']['medium'] }}" alt="Book Cover">
    <div class="book-display-info">
      <h4>{{ book_info['title'] }}</h4>
      <small>by {{ book_info['authors'][0]['name'] }}</small>
    </div>
  </div>
  <div class="note-create-text">
    <h3>Create your note.</h3>
  </div>
  <div class="note-module">
    <div id="editor-container">
    </div>

    <form method="post">
      {{ form.csrf_token() }}
      {{ form.text() }}
      {{ form.submit(class_="btn btn-success btn-savenote") }}
    </form>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
  var quill = new Quill('#editor-container', {
    modules: {
      toolbar: [
        ['bold', 'italic'],
        ['link', 'blockquote', 'code-block', 'image'],
        [{ list: 'ordered' }, { list: 'bullet' }]
      ]
    },
    placeholder: 'Compose an epic...',
    theme: 'snow'
  });
  $('form').submit(function() {
    $('input[name=text]').val(JSON.stringify(quill.getContents()));
  });
</script>
{% endblock %}
